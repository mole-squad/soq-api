version: '3'

tasks:
  dev:
    watch: true
    cmds:
      - go build -o bin/main cmd/main.go
      - defer: rm bin/main
      - bin/main
    sources:
      - '**/*.go'
    generates:
      - './bin/main'

  fmt:
    cmds:
      - go fmt ./...
    sources:
      - '**/*.go'

  db:
    cmds:
      - docker-compose -f docker/docker-compose.yml up db
